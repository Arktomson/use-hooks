(self.webpackChunkuse_hooks=self.webpackChunkuse_hooks||[]).push([[468],{72613:function(s,l,n){"use strict";var m;n.r(l),n.d(l,{demos:function(){return C}});var v=n(17061),r=n.n(v),g=n(17156),c=n.n(g),d=n(67294),M=n(16905),R=n(23067),C={"src-use-safe-state-demo-example":{component:d.memo(d.lazy(function(){return Promise.all([n.e(107),n.e(764),n.e(683),n.e(433)]).then(n.bind(n,93005))})),asset:{type:"BLOCK",id:"src-use-safe-state-demo-example",refAtomIds:[],dependencies:{"index.tsx":{type:"FILE",value:n(60719).Z},react:{type:"NPM",value:"18.3.1"},"use-hooks":{type:"NPM",value:"0.0.1"}},entry:"index.tsx",description:"useSafeState\u7684\u7528\u6CD5",title:"\u57FA\u7840\u7528\u6CD5"},context:{react:m||(m=n.t(d,2)),"use-hooks":R},renderOpts:{compile:function(){var E=c()(r()().mark(function p(){var b,T=arguments;return r()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,Promise.all([n.e(764),n.e(335)]).then(n.bind(n,37335));case 2:return y.abrupt("return",(b=y.sent).default.apply(b,T));case 3:case"end":return y.stop()}},p)}));function h(){return E.apply(this,arguments)}return h}()}}}},23067:function(s,l,n){"use strict";n.r(l),n.d(l,{useBoolean:function(){return g},useClickOutside:function(){return c},useCreation:function(){return M},useCssVar:function(){return R},useIntersection:function(){return b},useLatest:function(){return T},useLockFn:function(){return F},useMap:function(){return V},useMount:function(){return j},useReactive:function(){return $},useResize:function(){return G},useSafeState:function(){return N},useThrottle:function(){return Z},useUnMountedRef:function(){return U},useUnmount:function(){return _},useUpdate:function(){return D}});var m=n(27424),v=n.n(m),r=n(67294),g=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=(0,r.useState)(!!e),u=v()(t,2),a=u[0],f=u[1],o=(0,r.useCallback)(function(){return f(function(O){return!O})},[]),I=[{value:a,toggle:o},f];return I},c=function(e,t){(0,r.useEffect)(function(){console.log("\u66F4\u65B0");var u=function(f){var o;e!=null&&e.current&&!(e!=null&&(o=e.current)!==null&&o!==void 0&&o.contains(f.target))&&(t==null||t())};return document.addEventListener("click",u),function(){document.removeEventListener("click",u)}},[e,t])};function d(i,e){if(i===e)return!0;if(i.length!==e.length)return!1;for(var t=0;t<i.length;t++)if(!Object.is(i[t],e[t]))return!1;return!0}var M=function(e,t){var u=(0,r.useRef)({deps:t,val:void 0,initialized:!1}),a=u.current;return(!a.initialized||!d(a.deps,t))&&(a.initialized=!0,a.val=e(),a.deps=t),a.val},R=function(e){var t=function(f,o){e.current&&e.current.style.setProperty(f,o)},u=function(f){if(e.current)return getComputedStyle(e.current).getPropertyValue(f).trim()};return[u,t]},C=n(74704),E=n.n(C),h=new WeakMap,p=new IntersectionObserver(function(i){var e=E()(i),t;try{for(e.s();!(t=e.n()).done;){var u=t.value,a=h.get(u.target);a==null||a(u,p)}}catch(f){e.e(f)}finally{e.f()}}),b=function(e){if(typeof e!="function")throw new TypeError("The parameter should be a callback function");var t=(0,r.useRef)(null);return(0,r.useEffect)(function(){if(!t.current)throw new TypeError('"The parameter 1 should be of type Element');return p.observe(t.current),function(){p.unobserve(t.current)}},[]),(0,r.useEffect)(function(){h.set(t.current,e)},[e]),t},T=function(e){var t=(0,r.useRef)(e);return t.current=e,t},A=n(17061),y=n.n(A),B=n(17156),W=n.n(B),F=function(e){var t=(0,r.useRef)(!1);return(0,r.useCallback)(W()(y()().mark(function u(){var a=arguments;return y()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!t.current){o.next=2;break}return o.abrupt("return");case 2:return o.prev=2,t.current=!0,o.next=6,e.apply(void 0,a);case 6:return o.abrupt("return",o.sent);case 7:return o.prev=7,t.current=!1,o.finish(7);case 10:case"end":return o.stop()}},u,null,[[2,,7,10]])})),[e])},z=n(861),K=n.n(z),V=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=(0,r.useState)(new Map(e)),u=v()(t,2),a=u[0],f=u[1],o=(0,r.useRef)(e),I=(0,r.useCallback)(function(S,x){f(function(q){return new Map([].concat(K()(q),[[S,x]]))})},[]),O=(0,r.useCallback)(function(S){f(function(x){return x.delete(S),new Map(x)})},[]),J=(0,r.useCallback)(function(){f(new Map(o.current))},[]),Q=(0,r.useCallback)(function(S){return a.get(S)},[a]),X=(0,r.useCallback)(function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];f(new Map(S))},[]),Y=(0,r.useCallback)(function(){f(new Map)},[]);return(0,r.useMemo)(function(){return{value:a,set:I,remove:O,reset:J,get:Q,clear:Y,setAll:X}},[a])},j=function(e){(0,r.useEffect)(function(){e==null||e()},[])},w=n(18698),H=n.n(w);function P(i,e){return new Proxy(i,{get:function(u,a,f){var o=Reflect.get(u,a,f);return H()(o)==="object"?P(o,e):Reflect.get(u,a)},set:function(u,a,f){var o=Reflect.set(u,a,f);return e(),o},deleteProperty:function(u,a){var f=Reflect.deleteProperty(u,a);return e(),f}})}var $=function(e){var t=D(),u=M(function(){return P(e,t)},[]);return u},L=new WeakMap,k=new ResizeObserver(function(i){var e=E()(i),t;try{for(e.s();!(t=e.n()).done;){var u=t.value,a=L.get(u.target);a==null||a(u)}}catch(f){e.e(f)}finally{e.f()}}),G=function(e){if(typeof e!="function")throw new TypeError("The parameter should be a callback function");var t=(0,r.useRef)(null);return(0,r.useEffect)(function(){if(!t.current)throw new TypeError('"The parameter 1 should be of type Element');return k.observe(t.current),function(){k.unobserve(t.current)}},[]),(0,r.useEffect)(function(){L.set(t.current,e)},[e]),t};function N(i){var e=U(),t=(0,r.useState)(i),u=v()(t,2),a=u[0],f=u[1],o=(0,r.useCallback)(function(I){e.current||f(I)},[]);return[a,o]}var Z=function(e){function t(){}return{}},_=function(e){var t=T(e);(0,r.useEffect)(function(){return function(){var u;(u=t.current)===null||u===void 0||u.call(t)}},[])},U=function(){var e=(0,r.useRef)(!1);return(0,r.useEffect)(function(){return e.current=!1,function(){e.current=!0}},[]),e},D=function(){var e=(0,r.useState)({}),t=v()(e,2),u=t[1];return(0,r.useCallback)(function(){return u({})},[])}},99854:function(s,l,n){"use strict";n.r(l),n.d(l,{texts:function(){return v}});var m=n(16905);const v=[{value:"\u7528\u6CD5\u4E0E ",paraId:0,tocIndex:0},{value:"React.useState",paraId:0,tocIndex:0},{value:"\u5B8C\u5168\u4E00\u6837\uFF0C\u4F46\u662F\u5728\u7EC4\u4EF6\u5378\u8F7D\u540E\u5F02\u6B65\u56DE\u8C03\u5185\u7684 ",paraId:0,tocIndex:0},{value:"setState",paraId:0,tocIndex:0},{value:" \u4E0D\u518D\u6267\u884C\uFF0C\u907F\u514D\u56E0\u7EC4\u4EF6\u5378\u8F7D\u540E\u66F4\u65B0\u72B6\u6001\u800C\u5BFC\u81F4\u7684\u5185\u5B58\u6CC4\u6F0F\u3002",paraId:0,tocIndex:0},{value:`const [state, setState] = useSafeState(initialState);
`,paraId:1,tocIndex:4}]},60719:function(s,l){"use strict";l.Z=`import React, { useEffect, useState } from 'react';
import { useSafeState } from 'use-hooks';

const Child = () => {
  const [value, setValue] = useSafeState<string>();

  useEffect(() => {
    setTimeout(() => {
      setValue('data loaded from server');
    }, 5000);
  }, []);

  const text = value || 'Loading...';

  return <div>{text}</div>;
};

export default () => {
  const [visible, setVisible] = useState(true);

  return (
    <div>
      <button onClick={() => setVisible(false)} type="button">
        Unmount
      </button>
      {visible && <Child />}
    </div>
  );
};
`},63405:function(s,l,n){var m=n(73897);function v(r){if(Array.isArray(r))return m(r)}s.exports=v,s.exports.__esModule=!0,s.exports.default=s.exports},74704:function(s,l,n){var m=n(86116);function v(r,g){var c=typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(!c){if(Array.isArray(r)||(c=m(r))||g&&r&&typeof r.length=="number"){c&&(r=c);var d=0,M=function(){};return{s:M,n:function(){return d>=r.length?{done:!0}:{done:!1,value:r[d++]}},e:function(p){throw p},f:M}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var R=!0,C=!1,E;return{s:function(){c=c.call(r)},n:function(){var p=c.next();return R=p.done,p},e:function(p){C=!0,E=p},f:function(){try{!R&&c.return!=null&&c.return()}finally{if(C)throw E}}}}s.exports=v,s.exports.__esModule=!0,s.exports.default=s.exports},79498:function(s){function l(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}s.exports=l,s.exports.__esModule=!0,s.exports.default=s.exports},42281:function(s){function l(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}s.exports=l,s.exports.__esModule=!0,s.exports.default=s.exports},861:function(s,l,n){var m=n(63405),v=n(79498),r=n(86116),g=n(42281);function c(d){return m(d)||v(d)||r(d)||g()}s.exports=c,s.exports.__esModule=!0,s.exports.default=s.exports}}]);
