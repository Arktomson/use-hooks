(self.webpackChunkuse_hooks=self.webpackChunkuse_hooks||[]).push([[610],{9108:function(o,i,n){"use strict";var m;n.r(i),n.d(i,{demos:function(){return C}});var d=n(17061),r=n.n(d),y=n(17156),f=n.n(y),v=n(67294),M=n(72930),R=n(23067),C={"src-use-creation-demo-example":{component:v.memo(v.lazy(function(){return Promise.all([n.e(107),n.e(764),n.e(683),n.e(433)]).then(n.bind(n,1788))})),asset:{type:"BLOCK",id:"src-use-creation-demo-example",refAtomIds:[],dependencies:{"index.tsx":{type:"FILE",value:n(15812).Z},react:{type:"NPM",value:"18.3.1"},"use-hooks":{type:"NPM",value:"0.0.1"}},entry:"index.tsx",description:'\u70B9\u51FB "Rerender" \u6309\u94AE\uFF0C\u89E6\u53D1\u7EC4\u4EF6\u7684\u66F4\u65B0\uFF0C\u4F46 Foo \u7684\u5B9E\u4F8B\u4F1A\u4FDD\u6301\u4E0D\u53D8',title:"\u786E\u4FDD\u5B9E\u4F8B\u4E0D\u4F1A\u88AB\u91CD\u590D\u521B\u5EFA"},context:{react:m||(m=n.t(v,2)),"use-hooks":R},renderOpts:{compile:function(){var x=f()(r()().mark(function p(){var b,T=arguments;return r()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,Promise.all([n.e(764),n.e(335)]).then(n.bind(n,37335));case 2:return h.abrupt("return",(b=h.sent).default.apply(b,T));case 3:case"end":return h.stop()}},p)}));function I(){return x.apply(this,arguments)}return I}()}}}},23067:function(o,i,n){"use strict";n.r(i),n.d(i,{useBoolean:function(){return y},useClickOutside:function(){return f},useCreation:function(){return M},useCssVar:function(){return R},useIntersection:function(){return b},useLatest:function(){return T},useLockFn:function(){return z},useMap:function(){return j},useMount:function(){return K},useReactive:function(){return $},useResize:function(){return G},useSafeState:function(){return N},useThrottle:function(){return Z},useUnMountedRef:function(){return U},useUnmount:function(){return _},useUpdate:function(){return F}});var m=n(27424),d=n.n(m),r=n(67294),y=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=(0,r.useState)(!!e),u=d()(t,2),a=u[0],l=u[1],s=(0,r.useCallback)(function(){return l(function(O){return!O})},[]),E=[{value:a,toggle:s},l];return E},f=function(e,t){(0,r.useEffect)(function(){console.log("\u66F4\u65B0");var u=function(l){var s;e!=null&&e.current&&!(e!=null&&(s=e.current)!==null&&s!==void 0&&s.contains(l.target))&&(t==null||t())};return document.addEventListener("click",u),function(){document.removeEventListener("click",u)}},[e,t])};function v(c,e){if(c===e)return!0;if(c.length!==e.length)return!1;for(var t=0;t<c.length;t++)if(!Object.is(c[t],e[t]))return!1;return!0}var M=function(e,t){var u=(0,r.useRef)({deps:t,val:void 0,initialized:!1}),a=u.current;return(!a.initialized||!v(a.deps,t))&&(a.initialized=!0,a.val=e(),a.deps=t),a.val},R=function(e){var t=function(l,s){e.current&&e.current.style.setProperty(l,s)},u=function(l){if(e.current)return getComputedStyle(e.current).getPropertyValue(l).trim()};return[u,t]},C=n(74704),x=n.n(C),I=new WeakMap,p=new IntersectionObserver(function(c){var e=x()(c),t;try{for(e.s();!(t=e.n()).done;){var u=t.value,a=I.get(u.target);a==null||a(u,p)}}catch(l){e.e(l)}finally{e.f()}}),b=function(e){if(typeof e!="function")throw new TypeError("The parameter should be a callback function");var t=(0,r.useRef)(null);return(0,r.useEffect)(function(){if(!t.current)throw new TypeError('"The parameter 1 should be of type Element');return p.observe(t.current),function(){p.unobserve(t.current)}},[]),(0,r.useEffect)(function(){I.set(t.current,e)},[e]),t},T=function(e){var t=(0,r.useRef)(e);return t.current=e,t},A=n(17061),h=n.n(A),D=n(17156),W=n.n(D),z=function(e){var t=(0,r.useRef)(!1);return(0,r.useCallback)(W()(h()().mark(function u(){var a=arguments;return h()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!t.current){s.next=2;break}return s.abrupt("return");case 2:return s.prev=2,t.current=!0,s.next=6,e.apply(void 0,a);case 6:return s.abrupt("return",s.sent);case 7:return s.prev=7,t.current=!1,s.finish(7);case 10:case"end":return s.stop()}},u,null,[[2,,7,10]])})),[e])},B=n(861),w=n.n(B),j=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=(0,r.useState)(new Map(e)),u=d()(t,2),a=u[0],l=u[1],s=(0,r.useRef)(e),E=(0,r.useCallback)(function(g,S){l(function(q){return new Map([].concat(w()(q),[[g,S]]))})},[]),O=(0,r.useCallback)(function(g){l(function(S){return S.delete(g),new Map(S)})},[]),Y=(0,r.useCallback)(function(){l(new Map(s.current))},[]),J=(0,r.useCallback)(function(g){return a.get(g)},[a]),Q=(0,r.useCallback)(function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];l(new Map(g))},[]),X=(0,r.useCallback)(function(){l(new Map)},[]);return(0,r.useMemo)(function(){return{value:a,set:E,remove:O,reset:Y,get:J,clear:X,setAll:Q}},[a])},K=function(e){(0,r.useEffect)(function(){e==null||e()},[])},H=n(18698),V=n.n(H);function P(c,e){return new Proxy(c,{get:function(u,a,l){var s=Reflect.get(u,a,l);return V()(s)==="object"?P(s,e):Reflect.get(u,a)},set:function(u,a,l){var s=Reflect.set(u,a,l);return e(),s},deleteProperty:function(u,a){var l=Reflect.deleteProperty(u,a);return e(),l}})}var $=function(e){var t=F(),u=M(function(){return P(e,t)},[]);return u},k=new WeakMap,L=new ResizeObserver(function(c){var e=x()(c),t;try{for(e.s();!(t=e.n()).done;){var u=t.value,a=k.get(u.target);a==null||a(u)}}catch(l){e.e(l)}finally{e.f()}}),G=function(e){if(typeof e!="function")throw new TypeError("The parameter should be a callback function");var t=(0,r.useRef)(null);return(0,r.useEffect)(function(){if(!t.current)throw new TypeError('"The parameter 1 should be of type Element');return L.observe(t.current),function(){L.unobserve(t.current)}},[]),(0,r.useEffect)(function(){k.set(t.current,e)},[e]),t};function N(c){var e=U(),t=(0,r.useState)(c),u=d()(t,2),a=u[0],l=u[1],s=(0,r.useCallback)(function(E){e.current||l(E)},[]);return[a,s]}var Z=function(e){function t(){}return{}},_=function(e){var t=T(e);(0,r.useEffect)(function(){return function(){var u;(u=t.current)===null||u===void 0||u.call(t)}},[])},U=function(){var e=(0,r.useRef)(!1);return(0,r.useEffect)(function(){return e.current=!1,function(){e.current=!0}},[]),e},F=function(){var e=(0,r.useState)({}),t=d()(e,2),u=t[1];return(0,r.useCallback)(function(){return u({})},[])}},77321:function(o,i,n){"use strict";n.r(i),n.d(i,{texts:function(){return d}});var m=n(72930);const d=[{value:"useCreation",paraId:0,tocIndex:0},{value:" \u7528\u4E8E\u5BF9 useMemo \u4EE5\u53CA useRef \u4F5C\u8865\u5145\u4F18\u5316",paraId:0,tocIndex:0},{value:"\u56E0\u4E3A ",paraId:1,tocIndex:0},{value:"useMemo",paraId:1,tocIndex:0},{value:" \u4E0D\u80FD\u4FDD\u8BC1\u88AB memo \u7684\u503C\u4E00\u5B9A\u4E0D\u4F1A\u88AB\u91CD\u65B0\u8BA1\u7B97\uFF0C\u800C ",paraId:1,tocIndex:0},{value:"useCreation",paraId:1,tocIndex:0},{value:" \u53EF\u4EE5\u4FDD\u8BC1\u8FD9\u4E00\u70B9\u3002\u4EE5\u4E0B\u4E3A React \u5B98\u65B9\u6587\u6863\u4E2D\u7684\u4ECB\u7ECD\uFF1A",paraId:1,tocIndex:0},{value:"You may rely on useMemo as a performance optimization, not as a semantic guarantee. In the future, React may choose to \u201Cforget\u201D some previously memoized values and recalculate them on next render, e.g. to free memory for offscreen components. Write your code so that it still works without useMemo \u2014 and then add it to optimize performance.",paraId:2,tocIndex:0},{value:"\u800C\u76F8\u6BD4\u4E8E ",paraId:3,tocIndex:0},{value:"useRef",paraId:3,tocIndex:0},{value:"\uFF0C\u4F60\u53EF\u4EE5\u4F7F\u7528 ",paraId:3,tocIndex:0},{value:"useCreation",paraId:3,tocIndex:0},{value:" \u521B\u5EFA\u4E00\u4E9B\u5E38\u91CF\uFF0C\u8FD9\u4E9B\u5E38\u91CF\u548C ",paraId:3,tocIndex:0},{value:"useRef",paraId:3,tocIndex:0},{value:" \u521B\u5EFA\u51FA\u6765\u7684 ref \u6709\u5F88\u591A\u4F7F\u7528\u573A\u666F\u4E0A\u7684\u76F8\u4F3C\uFF0C\u4F46\u5BF9\u4E8E\u590D\u6742\u5E38\u91CF\u7684\u521B\u5EFA\uFF0C",paraId:3,tocIndex:0},{value:"useRef",paraId:3,tocIndex:0},{value:" \u5374\u5BB9\u6613\u51FA\u73B0\u6F5C\u5728\u7684\u6027\u80FD\u9690\u60A3\u3002",paraId:3,tocIndex:0},{value:`const a = useRef(new Subject()); // \u6BCF\u6B21\u91CD\u6E32\u67D3\uFF0C\u90FD\u4F1A\u6267\u884C\u5B9E\u4F8B\u5316 Subject \u7684\u8FC7\u7A0B\uFF0C\u5373\u4FBF\u8FD9\u4E2A\u5B9E\u4F8B\u7ACB\u523B\u5C31\u88AB\u6254\u6389\u4E86
const b = useCreation(() => new Subject(), []); // \u901A\u8FC7 factory \u51FD\u6570\uFF0C\u53EF\u4EE5\u907F\u514D\u6027\u80FD\u9690\u60A3
`,paraId:4,tocIndex:0},{value:`function useCreation<T>(fn: () => T, deps: any[]): T;
`,paraId:5,tocIndex:4},{value:"\u53C2\u6570",paraId:6,tocIndex:5},{value:"\u8BF4\u660E",paraId:6,tocIndex:5},{value:"\u7C7B\u578B",paraId:6,tocIndex:5},{value:"\u9ED8\u8BA4\u503C",paraId:6,tocIndex:5},{value:"fn",paraId:6,tocIndex:5},{value:"\u7528\u6765\u521B\u5EFA\u6240\u9700\u5BF9\u8C61\u7684\u51FD\u6570",paraId:6,tocIndex:5},{value:"() => any",paraId:6,tocIndex:5},{value:"-",paraId:6,tocIndex:5},{value:"deps",paraId:6,tocIndex:5},{value:"\u4F20\u5165\u4F9D\u8D56\u53D8\u5316\u7684\u5BF9\u8C61",paraId:6,tocIndex:5},{value:"any[]",paraId:6,tocIndex:5},{value:"-",paraId:6,tocIndex:5}]},15812:function(o,i){"use strict";i.Z=`import React, { useState } from 'react';
import { useCreation } from 'use-hooks';

class Foo {
  constructor() {
    this.data = Math.random();
  }

  data: number;
}

export default function () {
  const foo = useCreation(() => new Foo(), []);
  const [, setFlag] = useState({});
  return (
    <>
      <p>{foo.data}</p>
      <button
        type="button"
        onClick={() => {
          setFlag({});
        }}
      >
        Rerender
      </button>
    </>
  );
}
`},63405:function(o,i,n){var m=n(73897);function d(r){if(Array.isArray(r))return m(r)}o.exports=d,o.exports.__esModule=!0,o.exports.default=o.exports},74704:function(o,i,n){var m=n(86116);function d(r,y){var f=typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(!f){if(Array.isArray(r)||(f=m(r))||y&&r&&typeof r.length=="number"){f&&(r=f);var v=0,M=function(){};return{s:M,n:function(){return v>=r.length?{done:!0}:{done:!1,value:r[v++]}},e:function(p){throw p},f:M}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var R=!0,C=!1,x;return{s:function(){f=f.call(r)},n:function(){var p=f.next();return R=p.done,p},e:function(p){C=!0,x=p},f:function(){try{!R&&f.return!=null&&f.return()}finally{if(C)throw x}}}}o.exports=d,o.exports.__esModule=!0,o.exports.default=o.exports},79498:function(o){function i(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}o.exports=i,o.exports.__esModule=!0,o.exports.default=o.exports},42281:function(o){function i(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}o.exports=i,o.exports.__esModule=!0,o.exports.default=o.exports},861:function(o,i,n){var m=n(63405),d=n(79498),r=n(86116),y=n(42281);function f(v){return m(v)||d(v)||r(v)||y()}o.exports=f,o.exports.__esModule=!0,o.exports.default=o.exports}}]);
